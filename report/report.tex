\documentclass[
    11pt,
    oneside, %  comment to switch to alternatig margins (for printed layout)
    english,
    singlespacing, % Single line spacing, alternatives: onehalfspacing or doublespacing
%draft, % Uncomment to enable draft mode (no pictures, no links, overfull hboxes indicated)
%nolistspacing, % If the document is onehalfspacing or doublespacing, uncomment this to set spacing in lists to single
%liststotoc, % Uncomment to add the list of figures/tables/etc to the table of contents
%toctotoc, % Uncomment to add the main table of contents to the table of contents
%parskip, % Uncomment to add space between paragraphs
%nohyperref, % Uncomment to not load the hyperref package
    headsepline, % Uncomment to get a line under the header
%chapterinoneline, % Uncomment to place the chapter title next to the number on one line
%consistentlayout, % Uncomment to change the layout of the declaration, abstract and acknowledgements pages to match the default layout
]{MastersDoctoralThesis}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[nodayofweek]{datetime}
\usepackage{mathpazo}
%\usepackage{fontspec}
%\setmonofont{Consolas}

%\usepackage{pgfgantt}
\usepackage[backend=bibtex,style=vancouver,natbib=true]{biblatex} % Use the bibtex backend with the authoryear citation style (which resembles APA)

\addbibresource{biblio.bib}

\usepackage[autostyle=true]{csquotes}
\usepackage{tikz}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{listings}
\usepackage{textcomp}
\usepackage{color}
\usepackage{markdown}
\usepackage{wasysym}
\usetikzlibrary{arrows,positioning}
%\tikzset{
%%Define standard arrow tip
%    >=stealth',
%%Define style for boxes
%    punkt/.style={
%        rectangle,
%        rounded corners,
%        draw=black, thick,
%        text width=6.5em,
%        minimum height=2em,
%        text centered},
%% Define arrow style
%    pil/.style={
%        ->,
%        thick,
%        shorten <=2pt,
%        shorten >=2pt,}
%}
\geometry{
    paper=a4paper,
    inner=2.5cm,
    outer=3.8cm,
    bindingoffset=.5cm,
    top=1.5cm,
    bottom=1.5cm,
%showframe, % Uncomment to show how the type block is set on the page
}

% personal macros

\newcommand{\citeTODO}{[\scriptsize{\textit{\textsc{CITATION NEEDED}}}\normalsize]}
\newdateformat{daymonth}{
    \ordinal{DAY}\ of \monthname[\THEMONTH]
}
\newcommand{\monthdate}[2]{ \daymonth\formatdate{#1}{#2}{2022}}
% TODO find a nice definition format
\theoremstyle{definition}
\newtheorem{definition}{Definition}
%
%\newcommand{\thickerhline}{
%    \setlength{\arrayrulewidth}{.11.6.105em}
%    \hline
%    \setlength{\arrayrulewidth}{.05em}
%}

%\thesistitle{Exploring Trustless Licensing} % print with \ttitle
\thesistitle {Confis: A Framework for Authoring and Querying Machine-Readable Legal Agreements}
\supervisor{Prof. William J. \textsc{Knottenbelt}} % print with \supname
\marker{Dr. Paul A. \textsc{Bilokon}}
\degree{MEng Computing} % print with \degreename
\author{Nicol√°s \textsc{D'Cotta}} % print with \authorname
\addresses{} % print with \addressname

\subject{Computer Science} % Your subject area, this is not currently used anywhere in the template, print it elsewhere with \subjectname
\keywords{} % TODO fill - print with \keywordnames
\university{\href{https://www.imperial.ac.uk/}{Imperial College London}} % Your university's name and URL, this is used in the title page and abstract, print it elsewhere with \univname
\department{\href{https://www.imperial.ac.uk/computing}{Department of Computing}} % Your department's name and URL, this is used in the title page and abstract, print it elsewhere with \deptname
\group{\href{https://researchgroup.university.com}{Research Group Name}} % Your research group's name and URL, this is used in the title page, print it elsewhere with \groupname
\faculty{\href{https://faculty.university.com}{Faculty of Engineering}} % Your faculty's name and URL, this is used in the title page and abstract, print it elsewhere with \facname

\AtBeginDocument{
    \hypersetup{pdftitle=\ttitle} % Set the PDF's title to your title
    \hypersetup{pdfauthor=\authorname} % Set the PDF's author to your name
    \hypersetup{pdfkeywords=\keywordnames} % Set the PDF's keywords to your keywords
}


\begin{document}
    \usemintedstyle{tango}
    \setlength{\parskip}{\medskipamount}
    \setlength{\parindent}{0pt}

    \frontmatter
    \pagestyle{plain}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

    \begin{titlepage}
        \begin{center}

            \vspace*{.06\textheight}
            {\scshape\LARGE \univname\par}\vspace{1.5cm}
            % TODO restore for report
            \textsc{\Large MEng Final Year Project}\\[0.5cm]

            \HRule \\[0.4cm]
            {\huge \bfseries \ttitle\par}\vspace{0.4cm} % Thesis title
            \HRule \\[1.5cm]

            \begin{minipage}[t]{0.4\textwidth}
                \begin{flushleft}
                    \large
                    \emph{Author:}\\
                    \href{https://nico.dcotta.eu}{\authorname}
                \end{flushleft}
            \end{minipage}
            \begin{minipage}[t]{0.4\textwidth}
                \begin{flushright}
                    \large
                    \emph{Supervisor:} \\
                    \href{https://www.doc.ic.ac.uk/~wjk/}{\supname} \\[0.4 cm]
                    \emph{Second Marker:} \\
                    \href{https://www.imperial.ac.uk/people/paul.bilokon01}{\markername}
                \end{flushright}
            \end{minipage}\\[3cm]

            \vfill
            \large \textit{A report submitted in fulfillment of the requirements\\ for the degree of \degreename}\\[0.3cm] % University requirement text
            \textit{in the}\\[0.4 cm]
            \facname \\ \deptname\\[2 cm]

            \vfill

            {\large \today}\\[4cm] % Date
%\includegraphics{Logo} % University/department logo - uncomment to place it

            \vfill
        \end{center}
    \end{titlepage}


    \begin{abstract}
        \addchaptertocentry{\abstractname} % Add the abstract to the table of contents


        The notion of formalising contracts was first introduced by Szabo in~\cite{szabo1997smart-contracts} in 1997, but at the time of writing (25 years later) in practice how we interact with legal agreements has remained unchanged -- we still use them as plain text.
        Rather than replacing existing legal infrastructure, some new technologies like blockchain-based smart contracts have created a new class of self-enforcing software systems which mostly revolve around financial products.
        Other, more logic-based attempts to automate reasoning with legal documents are very specialist and require understanding of advanced topics, such as logic programming, linear temporal logic, or the event calculus.
        This lack of accessibility of existing technologies means that they have not seen practical adoption in industry.

        This project introduces \textbf{\emph{Confis}}, a Kotlin-based accessible language that specifies legal agreements and allows for complex queries.
%        Its features include converting documents back to plain English, an intelligent editor with a live preview, and a user interface for performing complex queries on documents as they are written.
        Contracts are written as stand-alone scripts inside a fully-capable editor based on IntelliJ IDEA~\cite{intelliJRepo}, inside which a live preview displays a plain English render of the encoded agreement.
        A graphical UI allows making questions involving parties' legal capabilities and their compliance, such as \emph{`What needs to happen for my landlord evict me?'} or \emph{`Has the seller breached the contract?'}


        % something in this technical paragraph about architecture ^
        % showcase your technical achievement!

        The result is an end-to-end framework that provides abstractions that successfully represent most use-cases for contracts comparable to those of Symboleo~\cite{symboleo2020} or The Accord Project~\cite{accordHomepage}, except with a strong focus on accessibility and ease-of-use aimed at industry.
        Simple and easier to learn abstractions are brought forward by compromising mainly language expressiveness -- and therefore in the complexity of the contracts that can be represented.
        % specify what kind of queries exactly you are able to answer

        % Last paragraph is kind of queries
        Overall, this project hopes to operationalise legal agreements by providing the industry with relevant and pragmatic tools, proving that it is possible to make use of a formalisation for a sales contract without a strong technical background.
        Next steps include communicating with other services for them to be aware of their legal capabilities (rather than relying on legal advice across teams inside an organisation), as well as improving the compromise between the contracts that can be represented and the complexity of the language.
        % specify how you built on top of another lang as an internal DSL

        % last para did you manage succesfully?? what about the future of contracts in general
        % what works what does not work
        % general outlook

        % what case studies

    \end{abstract}


    \begin{acknowledgements}
        \addchaptertocentry{\acknowledgementname} % TODO write akcnowledgements
        I would like to thank William, my supervisor\dots.
    \end{acknowledgements}

    \tableofcontents
    \listoffigures
    \listoftables


    \mainmatter % Begin numeric (1,2,3...) page numbering

    \pagestyle{thesis} % Return the page headers back to the "thesis" style


    \include{chapters/introduction}
    \include{chapters/background}
    \include{chapters/overview}
    \include{chapters/lang}
    \include{chapters/queries}
    \include{chapters/ethical}
    \include{chapters/evaluation}
    \include{chapters/conclusions}

    \appendix

    \include{appendices/confisExamples}
    \include{appendices/editorPreviews}

    \printbibliography[heading=bibintoc]

\end{document}

